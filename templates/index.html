{% extends "base.html" %}

{% block title %}Home - Facial Recognition Attendance System{% endblock %}

{% block extra_css %}
<style>
    .hero-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 4rem 0;
        margin-bottom: 3rem;
    }
    .feature-card {
        transition: transform 0.3s ease;
        height: 100%;
    }
    .feature-card:hover {
        transform: translateY(-5px);
    }
    .feature-icon {
        font-size: 3rem;
        color: #0d6efd;
        margin-bottom: 1rem;
    }
    .action-card {
        background: white;
        border-radius: 15px;
        padding: 2rem;
        text-align: center;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        height: 100%;
    }
    .action-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
    .action-btn {
        font-size: 1.2rem;
        padding: 1rem 2rem;
        border-radius: 50px;
        text-decoration: none;
        display: inline-block;
        margin-top: 1rem;
        min-width: 200px;
    }
    .stats-section {
        background-color: #f8f9fa;
        padding: 3rem 0;
        margin: 3rem 0;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section">
    <div class="container text-center">
        <h1 class="display-4 fw-bold mb-4">
            <i class="fas fa-user-check me-3"></i>
            Welcome to Face Attendance System
        </h1>
        <p class="lead mb-4">
            Advanced facial recognition and QR code-based attendance tracking system
        </p>
        <p class="mb-0">
            Secure, fast, and reliable employee time tracking solution
        </p>
    </div>
</div>

<!-- Quick Actions -->
<div class="row g-4 mb-5">
    <div class="col-md-6 col-lg-3">
        <div class="action-card">
            <i class="fas fa-clock feature-icon"></i>
            <h4>Mark Attendance</h4>
            <p class="text-muted">Clock in or out using facial recognition and QR code verification</p>
            <a href="/attendance/" class="btn btn-primary action-btn">
                <i class="fas fa-play me-2"></i>Start Attendance
            </a>
        </div>
    </div>
    
    <div class="col-md-6 col-lg-3">
        <div class="action-card">
            <i class="fas fa-users feature-icon"></i>
            <h4>Manage Employees</h4>
            <p class="text-muted">Register new employees and manage face recognition profiles</p>
            <a href="/employee/list" class="btn btn-success action-btn">
                <i class="fas fa-users me-2"></i>View Employees
            </a>
        </div>
    </div>
    
    <div class="col-md-6 col-lg-3">
        <div class="action-card">
            <i class="fas fa-chart-bar feature-icon"></i>
            <h4>Admin Dashboard</h4>
            <p class="text-muted">View reports, manage system settings, and monitor attendance</p>
            <a href="/admin/dashboard" class="btn btn-warning action-btn">
                <i class="fas fa-tachometer-alt me-2"></i>Dashboard
            </a>
        </div>
    </div>
    
    <div class="col-md-6 col-lg-3">
        <div class="action-card">
            <i class="fas fa-cog feature-icon"></i>
            <h4>System Health</h4>
            <p class="text-muted">Check system status and API health information</p>
            <a href="/health" class="btn btn-info action-btn">
                <i class="fas fa-heartbeat me-2"></i>Health Check
            </a>
        </div>
    </div>
</div>

<!-- System Statistics -->
<div class="stats-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-12 mb-4">
                <h2 class="fw-bold">System Statistics</h2>
                <p class="text-muted">Real-time overview of your attendance system</p>
            </div>
        </div>
        
        <div class="row g-4" id="statsContainer">
            <div class="col-md-3">
                <div class="card text-center border-0 bg-primary text-white">
                    <div class="card-body">
                        <i class="fas fa-users fa-2x mb-3"></i>
                        <h3 id="totalEmployees">0</h3>
                        <p class="mb-0">Total Employees</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card text-center border-0 bg-success text-white">
                    <div class="card-body">
                        <i class="fas fa-user-check fa-2x mb-3"></i>
                        <h3 id="activeEmployees">0</h3>
                        <p class="mb-0">Active Employees</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card text-center border-0 bg-info text-white">
                    <div class="card-body">
                        <i class="fas fa-calendar-check fa-2x mb-3"></i>
                        <h3 id="todayAttendance">0</h3>
                        <p class="mb-0">Today's Records</p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="card text-center border-0 bg-warning text-white">
                    <div class="card-body">
                        <i class="fas fa-fingerprint fa-2x mb-3"></i>
                        <h3 id="totalEmbeddings">0</h3>
                        <p class="mb-0">Face Profiles</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Features Section -->
<div class="row g-4 mb-5">
    <div class="col-12">
        <h2 class="text-center fw-bold mb-4">Key Features</h2>
    </div>
    
    <div class="col-md-4">
        <div class="card feature-card">
            <div class="card-body text-center">
                <i class="fas fa-face-smile feature-icon"></i>
                <h4>Advanced Face Recognition</h4>
                <p class="text-muted">
                    State-of-the-art MediaPipe-based facial recognition with high accuracy 
                    and real-time processing capabilities.
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card feature-card">
            <div class="card-body text-center">
                <i class="fas fa-qrcode feature-icon"></i>
                <h4>QR Code Integration</h4>
                <p class="text-muted">
                    Dual verification system combining facial recognition with QR code 
                    scanning for enhanced security.
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card feature-card">
            <div class="card-body text-center">
                <i class="fas fa-mobile-alt feature-icon"></i>
                <h4>Mobile Friendly</h4>
                <p class="text-muted">
                    Responsive design optimized for mobile devices with camera access 
                    for on-the-go attendance marking.
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card feature-card">
            <div class="card-body text-center">
                <i class="fas fa-shield-alt feature-icon"></i>
                <h4>Secure & Private</h4>
                <p class="text-muted">
                    Encrypted face embeddings and secure data handling ensure 
                    employee privacy and data protection.
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card feature-card">
            <div class="card-body text-center">
                <i class="fas fa-chart-line feature-icon"></i>
                <h4>Detailed Reports</h4>
                <p class="text-muted">
                    Comprehensive attendance reports and analytics with export 
                    capabilities for HR management.
                </p>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card feature-card">
            <div class="card-body text-center">
                <i class="fas fa-clock feature-icon"></i>
                <h4>Real-time Tracking</h4>
                <p class="text-muted">
                    Live attendance monitoring with instant notifications and 
                    real-time dashboard updates.
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Quick Start Guide -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">
                    <i class="fas fa-rocket me-2"></i>Quick Start Guide
                </h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 text-center mb-3">
                        <div class="badge bg-primary rounded-pill fs-4 mb-2">1</div>
                        <h5>Register Employees</h5>
                        <p class="text-muted small">Add employee details and capture face profiles</p>
                    </div>
                    <div class="col-md-3 text-center mb-3">
                        <div class="badge bg-primary rounded-pill fs-4 mb-2">2</div>
                        <h5>Setup Face Recognition</h5>
                        <p class="text-muted small">Upload multiple photos for better accuracy</p>
                    </div>
                    <div class="col-md-3 text-center mb-3">
                        <div class="badge bg-primary rounded-pill fs-4 mb-2">3</div>
                        <h5>Generate QR Codes</h5>
                        <p class="text-muted small">Print QR codes for each employee</p>
                    </div>
                    <div class="col-md-3 text-center mb-3">
                        <div class="badge bg-primary rounded-pill fs-4 mb-2">4</div>
                        <h5>Start Tracking</h5>
                        <p class="text-muted small">Employees can now mark attendance easily</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Load system statistics
    loadSystemStats();
    
    // Refresh stats every 30 seconds
    setInterval(loadSystemStats, 30000);
});

async function loadSystemStats() {
    try {
        const response = await fetch('/api/stats');
        if (response.ok) {
            const stats = await response.json();
            updateStatsDisplay(stats);
        }
    } catch (error) {
        console.error('Failed to load system stats:', error);
        // Show default values on error
        updateStatsDisplay({
            total_employees: 0,
            active_employees: 0,
            attendance_records_today: 0,
            total_face_embeddings: 0
        });
    }
}

function updateStatsDisplay(stats) {
    document.getElementById('totalEmployees').textContent = stats.total_employees || 0;
    document.getElementById('activeEmployees').textContent = stats.active_employees || 0;
    document.getElementById('todayAttendance').textContent = stats.attendance_records_today || 0;
    document.getElementById('totalEmbeddings').textContent = stats.total_face_embeddings || 0;
}

// Add smooth scrolling for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});
</script>
{% endblock %} 